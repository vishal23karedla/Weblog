<mat-card class="whole">
    <form [formGroup]="form" (submit)="onSavePost()" >
        <mat-form-field>
            <input 
                matInput
                type="text"
                formControlName="title" 
                placeholder="Post Title"
            >
            <mat-error *ngIf="form.get('title').invalid " >Please enter a valid post title</mat-error>
        </mat-form-field>

        <mat-form-field>
            <textarea 
                matInput
                rows="4"
                formControlName="content" 
                placeholder="Post Content"
                ></textarea>
            <mat-error *ngIf="form.get('content').invalid " >Please enter some valid content</mat-error>
        </mat-form-field>

        <div>
            <button mat-stroked-button type="button" (click)="filePicker.click()">Pick Image</button>
            <input class="Image-Picker" type="file" #filePicker (change)="onImagePicked($event)"  >
        </div>
        <div class="image-preview" *ngIf="imagePreview!==null && imagePreview!=='' && form.get('image').valid ">
            <img [src]="imagePreview" [alt]="form.value.title">
        </div>

        <mat-error *ngIf=" showError" >Please add an image</mat-error>
        <button
            mat-raised-button
            color="primary"
            type="Submit" >Save Post</button>

    </form>
</mat-card>



<!-- ngForm (from FormsModules)creates a JS object with the inputs of the form and we need to include ngModel in all the inputs to get control of that input value-->